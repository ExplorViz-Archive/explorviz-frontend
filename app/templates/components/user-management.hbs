<div class="d-flex justify-content-center flex-grow-1 container" style="min-height: 0">
  {{#if (eq page "createSingleUser")}}
    <div class="col-12 mt-3 d-flex flex-column">
      <div>
        {{#bs-button onClick=(action "openMainPage") type="secondary" outline=true}}
          {{svg-jar "reply" class="octicon align-middle"}}
        {{/bs-button}}
      </div>
      <h3 class="mt-4">Create Users</h3>
      <div>
        {{#bs-button-group
          value=page
          type="radio"
          class="mt-2 mb-2 float-right"
          onChange=(action (mut page)) as |bg|}}
          {{#bg.button value="createSingleUser"}}Single User{{/bg.button}}
          {{#bg.button value="createMultipleUsers"}}Multiple Users{{/bg.button}}
        {{/bs-button-group}}
      </div>
      {{#bs-form formLayout=formLayout model=this onSubmit=(action "saveUser") as |form|}}
        {{form.element controlType="text" label="Username" placeholder="Username" property="username" required=true}}
        {{form.element controlType="password" label="Password" placeholder="Password" property="password" required=true}}
        {{#form.element controlType="power-select-multiple" property="roles_selected_single" label="Choose Roles" searchEnabled=false loadingMessage="Loading..." options=roles 
        as |el|}}
          {{#el.control 
            onopen=(perform getRoles)
            as |item|}}
              {{item.descriptor}}
          {{/el.control}}
        {{/form.element}}
        {{bs-button defaultText="Submit" type="primary" buttonType="submit"}}
      {{/bs-form}}
    </div>
  {{else if (eq page "createMultipleUsers")}}
    <div class="col-12 mt-3 d-flex flex-column">
      <div>
        {{#bs-button onClick=(action "openMainPage") type="secondary" outline=true title="Back to User List"}}
          {{svg-jar "reply" class="octicon align-middle"}}
        {{/bs-button}}
      </div>
      <h3 class="mt-4">Create Users</h3>
      <div>
        {{#bs-button-group
          value=page
          type="radio"
          class="mt-2 mb-2 float-right"
          onChange=(action (mut page)) as |bg|}}
          {{#bg.button value="createSingleUser"}}Single User{{/bg.button}}
          {{#bg.button value="createMultipleUsers"}}Multiple Users{{/bg.button}}
        {{/bs-button-group}}
      </div>
      {{#bs-form formLayout=formLayout model=this onSubmit=(action "saveMultipleUsers") as |form|}}
        {{form.element controlType="text" label="Username Prefix" placeholder="Username Prefix" property="usernameprefix" required=true}}
        {{form.element controlType="number" label="Number of Users" placeholder="# of users" property="numberofusers" min="1" required=true}}
        {{#form.element controlType="power-select-multiple" property="roles_selected_multiple" label="Choose Roles" searchEnabled=false loadingMessage="Loading..." options=roles 
        as |el|}}
          {{#el.control 
            onopen=(perform getRoles)  
            as |item|}}
              {{item.descriptor}}
          {{/el.control}}
        {{/form.element}}
        {{bs-button defaultText="Submit" type="primary" buttonType="submit"}}
      {{/bs-form}}
    </div>
  {{else if (eq page "main")}}
    <div class="col-12 mt-3 d-flex flex-column">
      <h3>User List</h3>
      <div class="mb-3">
        <div class="float-right">
          {{#bs-button onClick=(action "openCreateSingleUserPage") type="success" outline=true}}
            {{svg-jar "person" class="octicon align-middle"}}{{svg-jar "plus-small" class="octicon align-middle"}} Add Users
          {{/bs-button}}
        </div>
      </div>
      <div class="d-flex flex-grow-1" style="overflow-y: auto">
        <table class="table table-striped">
          <thead class="thead-light">
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Name</th> 
              <th scope="col">Roles</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody>
            {{#each users as |user|}}
              <tr>
                <th scope="row">{{user.id}}</th>
                <td>{{user.username}}</td>
                <td>
                  {{#each user.roles as |role|}}
                    {{role.descriptor}}
                  {{/each}}
                </td>
                <td class="text-right">
                  {{#bs-dropdown as |dd|}}
                    {{#dd.button class="removecaret" size="sm" title="Options"}}
                      {{svg-jar "kebab-vertical" class="octicon align-middle"}}
                    {{/dd.button}}
                    {{#dd.menu as |ddm|}}
                      {{#ddm.item}}
                        <a class="dropdown-item" style="cursor: pointer" title="Edit" {{action "editUser" user}}>
                          {{svg-jar "pencil" class="octicon align-middle" id="edit-button"}} Edit
                        </a>
                      {{/ddm.item}}
                      {{#ddm.item}}
                        <a class="dropdown-item" style="cursor: pointer" title="Delete" {{action "deleteUser" user}}>
                          {{svg-jar "x" class="octicon align-middle" id="delete-button"}} Delete
                        </a>
                      {{/ddm.item}}
                    {{/dd.menu}}
                  {{/bs-dropdown}}
                </td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  {{/if}}
</div>