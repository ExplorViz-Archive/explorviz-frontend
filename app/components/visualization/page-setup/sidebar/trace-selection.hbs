<div class="sidebar-component-close">
  <button
    type="button"
    class="sidebar-component-close-button"
    title="Close Trace Selection"
    {{on "click" this.close}}
  >
    {{svg-jar "x" class="octicon"}}
  </button>
</div>

<div class="sidebar-component-title">
  <h5>Trace Selection</h5>
</div>

<div class="mt-2 mb-1 d-flex justify-content-end">
  <div>
    <Input
      id="filterInput"
      @value={{this.filterInput}}
      @placeholder="Filter traces"
      class="form-control input-lg"
      @autofocus="autofocus"
      @focus-out={{this.filter}}
      @enter={{this.filter}}
    />
  </div>
  <div>
    <BsButton
      @onClick={{this.filter}}
      @type="button"
      class="btn btn-light"
    >
      {{svg-jar "search" class="octicon align-middle"}}
    </BsButton>
  </div>
</div>

<div style="max-height:500px; overflow:auto; width:100%;">
  <table class="table table-hover">
    <thead>
      <tr style="cursor: pointer">
        <th {{on "click" (fn this.sortByProperty "traceId")}} scope="col">Trace ID</th>
        <th {{on "click" (fn this.sortByProperty "sourceClazz.name")}} scope="col">Soure Clazz</th>
        <th {{on "click" (fn this.sortByProperty "targetClazz.name")}} scope="col">Target Clazz</th>
        <th {{on "click" (fn this.sortByProperty "totalTraceDuration")}} scope="col">
          Duration in
          <BsButton
            @onClick={{this.toggleTraceTimeUnit}}
            class="th-btn"
            @outline={{true}}
          >
            {{this.traceTimeUnit}}
          </BsButton>
        </th>
      </tr>
    </thead>
    <tbody>
      {{#each this.traces as |trace|}}
        <tr
          style="cursor: pointer"
          bgcolor={{if this.selectedTrace "#cc8a8a"}}
          {{on "click" (fn this.clickedTrace trace)}}
        >
          <th title={{trace.traceId}}>{{truncate trace.traceId 8 true}}</th>
          <td title={{trace.sourceClazz.name}}>{{truncate trace.sourceClazz.name 12 true}}</td>
          <td title={{trace.targetClazz.name}}>{{truncate trace.targetClazz.name 14 true}}</td>
          {{!-- <td>{{format-number  this.traceTimeUnit}}</td> --}}
          <td>{{trace.duration}}</td>
        </tr>
      {{/each}}
    </tbody>
  </table>
</div>

{{#if this.selectedTrace}}
  <hr>
  <Visualization::PageSetup::Sidebar::TraceReplayer::TraceReplayerMain
    @selectedTrace={{this.selectedTrace}}
    @structureData={{@structureData}}
    @dynamicData={{@dynamicData}}
    @highlightTrace={{@highlightTrace}}
    @moveCameraTo={{@moveCameraTo}}
  />
{{/if}}