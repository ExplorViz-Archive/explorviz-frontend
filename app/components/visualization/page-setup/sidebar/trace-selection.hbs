<div class="mt-2 mb-1 d-flex justify-content-end">
  <div>
    <Input
      id="filterInput"
      @value={{this.filterInput}}
      @placeholder="Filter traces"
      class="form-control input-lg"
      @autofocus="autofocus"
      @focus-out={{this.filter}}
      @enter={{this.filter}}
    />
  </div>
  <div>
    <BsButton
      @onClick={{this.filter}}
      @type="button"
      class="btn btn-light"
    >
      {{svg-jar "search" class="octicon align-middle"}}
    </BsButton>
  </div>
</div>

<div style="max-height:500px; overflow:auto; width:100%;">
  <table class="table table-hover">
    <thead>
      <tr style="cursor: pointer">
        <th {{on "click" (fn this.sortByProperty "traceId")}} scope="col">Trace ID</th>
        <th {{on "click" (fn this.sortByProperty "sourceClazz.name")}} scope="col">Soure Clazz</th>
        <th {{on "click" (fn this.sortByProperty "targetClazz.name")}} scope="col">Target Clazz</th>
        <th {{on "click" (fn this.sortByProperty "totalTraceDuration")}} scope="col">
          Duration in
          <BsButton
            @onClick={{this.toggleTraceTimeUnit}}
            class="th-btn"
            @outline={{true}}
          >
            {{this.traceTimeUnit}}
          </BsButton>
        </th>
      </tr>
    </thead>
    <tbody>
      {{#each this.traces as |trace index|}}
        <tr
          style="cursor: pointer"
          bgcolor={{if @selectedTrace "#cc8a8a"}}
          {{on "click" (fn @selectTrace trace)}}
        >
          <th title={{trace.traceId}}>{{truncate trace.traceId 8 true}}</th>
          <td title={{trace.sourceClazz.name}}>{{truncate trace.sourceClazz.name 12 true}}</td>
          <td title={{trace.targetClazz.name}}>{{truncate trace.targetClazz.name 14 true}}</td>
          {{#let (get this.traceDurations index) as |duration|}}
            <td>{{format-number duration this.traceTimeUnit}}</td>
          {{/let}}
        </tr>
      {{/each}}
    </tbody>
  </table>
</div>
